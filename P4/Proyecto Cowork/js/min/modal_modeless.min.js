var modal_open=false,pick=null,closeBttn=document.querySelector(".overlay-close"),modal=document.getElementsByClassName("overlay");console.log(closeBttn);function parentNodeByTag(child,parent,trys,depth){if(trys==depth){return null}else{if(child.parentNode.nodeName==parent){pick=child.parentNode}else{parentNodeByTag(child.parentNode,parent,trys+1,depth)}}}document.addEventListener("click",function(e){e=e||window.event;var target=e.target||e.srcElement;if(target.id=="trigger-overlay"){modal_open=true}else{if(target!=closeBttn&&target.className!=modal[0].className){parentNodeByTag(target,"SECTION",0,4);substring="overlay";if(modal_open&&pick.className.indexOf(substring)==-1){closeBttn.click();modal_open=false}}else{if(target.className=="overlay-close"){modal_open=false}}}},false);